{"version":3,"sources":["webpack://animation/./src/components/card/card.scss?0e8d","webpack://animation/./src/components/cards-field/cards-field.scss?bb20","webpack://animation/./src/app.ts","webpack://animation/./src/components/base-component.ts","webpack://animation/./src/components/card/card.ts","webpack://animation/./src/components/cards-field/cards-field.ts","webpack://animation/./src/components/game/game.ts","webpack://animation/./src/components/shared/delay.ts","webpack://animation/webpack/bootstrap","webpack://animation/webpack/runtime/make namespace object","webpack://animation/./src/index.ts","webpack://animation/./src/style.scss?bc3b"],"names":[],"mappings":"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","file":"main.d5e92b5ef947d57ded43.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","import { Game } from './components/game/game';\r\nimport { ImageCategoryModal } from './models/image-category-modal';\r\n\r\nexport class App {\r\n  private readonly game: Game;\r\n\r\n  constructor(private readonly rootElement: HTMLElement) {\r\n    this.game = new Game();\r\n    this.rootElement.append(this.game.element);\r\n  }\r\n\r\n  async start() {\r\n    const res = await fetch('./images.json');\r\n    const categories: ImageCategoryModal[] = await res.json();\r\n    var ss = 'dfd';\r\n    const cat = categories[0];\r\n    const images = cat.images.map((name) => `${cat.category}/${name}`); //`?\r\n\r\n    this.game.newGame(images);\r\n  }\r\n}\r\n","export class BaseComponent {\r\n  readonly element: HTMLElement;\r\n\r\n  constructor(tag: keyof HTMLElementTagNameMap = 'div', styles: string[] = []) {\r\n    this.element = document.createElement(tag);\r\n    this.element.classList.add(...styles);\r\n  }\r\n}\r\n","import { BaseComponent } from '../base-component';\r\nimport './card.scss';\r\n\r\nconst FLIP_CLASS = 'flipped';\r\n\r\nexport class Card extends BaseComponent {\r\n  // принимать путь картинки для фронт\r\n  constructor(readonly image: string) {\r\n    super('div', ['card-container']);\r\n\r\n    this.element.innerHTML = `\r\n      <div class=\"card\">\r\n        <div class=\"card__font\" style=\"background-image: url('./images/${image}')\"></div>\r\n        <div class=\"card__back\"></div>\r\n      </div>`;\r\n  }\r\n\r\n  flipToFront() {\r\n    console.log(`front`);\r\n    return this.flip(true);\r\n  }\r\n\r\n  flipToBack() {\r\n    console.log(`back`);\r\n    return this.flip();\r\n  }\r\n\r\n  private flip(isBack = false): Promise<void> {\r\n    return new Promise((resolve) => {\r\n      this.element.classList.toggle(FLIP_CLASS, isBack); // true = add /false = remove\r\n      this.element.addEventListener('transitionend', () => resolve(), {\r\n        once: true,\r\n      });\r\n    });\r\n  }\r\n}\r\n","import { BaseComponent } from '../base-component';\r\nimport { Card } from '../card/card';\r\nimport './cards-field.scss';\r\n\r\nconst SHOW_TIME = 15;\r\n\r\nexport class CardsField extends BaseComponent {\r\n  private cards: Card[] = [];\r\n\r\n  constructor() {\r\n    super('div', ['cards-field']);\r\n  }\r\n\r\n  clear() {\r\n    this.cards = [];\r\n    this.element.innerHTML = '';\r\n  }\r\n\r\n  addCards(cards: Card[]) {\r\n    this.cards = cards;\r\n    this.cards.forEach((card) => {\r\n      this.element.append(card.element);\r\n    });\r\n\r\n    setTimeout(() => {\r\n      this.cards.forEach((card) => {\r\n        card.flipToFront();\r\n      });\r\n    }, SHOW_TIME * 1000);\r\n  }\r\n}\r\n","import { BaseComponent } from '../base-component';\r\nimport { Card } from '../card/card';\r\nimport { CardsField } from '../cards-field/cards-field';\r\nimport { delay } from '../shared/delay';\r\n\r\nconst FLIP_DELAY = 2000;\r\n\r\nexport class Game extends BaseComponent {\r\n  private readonly cardField: CardsField;\r\n  private activeCard?: Card;\r\n  private isAnimation = false;\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.cardField = new CardsField();\r\n    this.element.append(this.cardField.element);\r\n  }\r\n  newGame(images: string[]) {\r\n    // если игра была уже создана\r\n    this.cardField.clear();\r\n\r\n    const cards = images\r\n      .concat(images)\r\n      .map((url) => new Card(url))\r\n      .sort(() => Math.random() - 0.5);\r\n\r\n    cards.forEach((card) => {\r\n      card.element.addEventListener('click', () => {\r\n        console.log(`click`);\r\n        this.cardHandler(card);\r\n      });\r\n    });\r\n\r\n    this.cardField.addCards(cards);\r\n  }\r\n\r\n  private async cardHandler(card: Card) {\r\n    if (this.isAnimation) return;\r\n    this.isAnimation = true;\r\n\r\n    await card.flipToFront();\r\n\r\n    if (!this.activeCard) {\r\n      this.activeCard = card;\r\n      this.isAnimation = false;\r\n      return;\r\n    }\r\n\r\n    if (this.activeCard.image != card.image) {\r\n      await delay(FLIP_DELAY);\r\n      await Promise.all([this.activeCard.flipToBack(), card.flipToBack()]);\r\n    }\r\n    this.activeCard = undefined;\r\n    this.isAnimation = false;\r\n  }\r\n}\r\n","export function delay(timeout: number): Promise<void> {\r\n  return new Promise((resolve) => {\r\n    setTimeout(resolve, timeout);\r\n  });\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { App } from './app';\r\n\r\nwindow.onload = () => {\r\n  const appElement = document.getElementById('app');\r\n\r\n  if (!appElement) throw Error('App root element not found');\r\n\r\n  new App(appElement).start();\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport {};"],"sourceRoot":""}